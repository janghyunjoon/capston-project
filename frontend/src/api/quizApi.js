// src/api/quizApi.js
// ✅ 교통사고/과실비율/도로교통법 OX퀴즈 (Mock)
// - 목적: "맞추기"보다 "왜 그런지"를 설명해주는 학습형 퀴즈

const QUIZZES = [
  // ===== 보행자 보호 / 우회전 =====
  {
    id: 1,
    question: "횡단보도에서 보행자가 '건너려고 하는' 상황(진입 직전 포함)에도 운전자는 정지선에서 일시정지해야 한다.",
    answer: true,
    explanation:
      "맞아요. 도로교통법 제27조는 보행자가 횡단보도를 '통행하고 있거나 통행하려고 하는 때'에는 운전자가 횡단보도 앞(정지선이 있으면 정지선)에서 일시정지해 보행자의 횡단을 방해하거나 위험을 주지 않도록 하라고 규정합니다.\n\n포인트:\n- '이미 건너는 중'만이 아니라, '막 진입하려는 때'도 포함\n- 실제 분쟁에서 가장 많이 갈리는 지점이 이 ‘통행하려고 하는 때’의 해석입니다.",
    meta: { category: "보행자보호", basis: "도로교통법 제27조" },
  },
  {
    id: 2,
    question: "교통정리를 하는 교차로에서 우회전(또는 좌회전)할 때, 보행자 신호에 따라 횡단 중인 보행자의 통행을 방해하면 안 된다.",
    answer: true,
    explanation:
      "맞아요. 도로교통법 제27조는 교통정리를 하는 교차로에서 좌·우회전하려는 차량은 신호/지시에 따라 횡단하는 보행자의 통행을 방해해서는 안 된다고 규정합니다.\n\n포인트:\n- 우회전은 '차량이 움직일 수 있느냐'보다 '보행자 보호가 우선이냐'가 핵심\n- 보행자가 우선인 상황에서 무리하게 진행하면 과실이 크게 잡히기 쉽습니다.",
    meta: { category: "보행자보호", basis: "도로교통법 제27조" },
  },

  // ===== 안전거리 / 진로변경(차선변경) =====
  {
    id: 3,
    question: "같은 방향으로 가는 앞차를 따라갈 때는, 앞차가 갑자기 멈춰도 충돌을 피할 수 있는 '필요한 거리'를 확보해야 한다.",
    answer: true,
    explanation:
      "맞아요. 도로교통법 제19조는 앞차가 급정지해도 충돌을 피할 수 있는 필요한 거리를 확보하도록 규정합니다.\n\n포인트:\n- '나는 급브레이크 안 했다'는 변명이 잘 통하지 않음\n- 블박에 앞차가 급정지로 보이더라도, 상황·거리·속도에 따라 뒤차 과실이 크게 잡히는 이유가 여기에 있습니다.",
    meta: { category: "안전운전", basis: "도로교통법 제19조" },
  },
  {
    id: 4,
    question: "차로 변경은 깜빡이만 켜면 뒤차가 알아서 양보해야 하므로, 옆 차로에 차가 있어도 변경해도 된다.",
    answer: false,
    explanation:
      "틀렸어요. 깜빡이는 '요청'이지 '우선권'이 아닙니다.\n도로교통법 제19조는 진로 변경하려는 방향으로 오고 있는 다른 차의 정상 통행에 장애를 줄 우려가 있으면 진로 변경을 해서는 안 된다고 규정해요.\n\n포인트:\n- 깜빡이를 켰어도 '안전하게 들어갈 수 있을 때'만 변경\n- 급끼어들기/무리한 변경은 과실 가산 요인이 되기 쉽습니다.",
    meta: { category: "차로변경", basis: "도로교통법 제19조" },
  },

  // ===== 과실비율(손해보험협회 기준) =====
  {
    id: 5,
    question: "양 차량이 같은 방향으로 주행 중인데 뒤차가 앞차를 추돌한 경우, 기본 과실비율은 보통 뒤차 100%로 본다.",
    answer: true,
    explanation:
      "대체로 맞아요. 과실비율 인정기준(차41-1)은 '후방 추돌'의 경우 뒤차의 전방주시태만/안전거리 미확보가 주된 원인이라 보고 기본 과실을 100:0으로 두는 형태가 많습니다.\n\n주의:\n- 앞차의 급정지·무리한 끼어들기·고의/중과실 정차 등 예외 사정이 있으면 조정될 수 있어요.\n- 그래서 블박/현장상황이 중요합니다.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 차41-1" },
  },
  {
    id: 6,
    question: "일반도로 가장자리(갓길 포함)에 주·정차 중인 차량을 뒤차가 추돌하면, 기본 과실은 주정차차량 0 : 추돌차량 100으로 보는 기준이 있다.",
    answer: true,
    explanation:
      "맞아요. 과실비율 인정기준(차42-2)은 일반 도로 가장자리(갓길 포함) 주·정차 차량을 동일방향 후행차가 추돌한 경우, 기본적으로 추돌차의 일방 과실(0:100)을 기준으로 둡니다.\n\n주의:\n- 주정차 금지장소/2차로를 막는 위험한 정차/야간 시인성 부족 등은 주정차차량 과실이 가산될 수 있습니다.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 차42-2" },
  },
  {
    id: 7,
    question: "신호 없는 동일 폭 교차로에서 '왼쪽 도로에서 직진'하는 차와 '오른쪽 도로에서 좌회전 진입'하는 차가 충돌하면, 직진차는 무조건 0% 과실이다.",
    answer: false,
    explanation:
      "틀렸어요. 과실비율 인정기준(차16-1)에서는 이 상황의 기본 과실을 40:60으로 제시합니다(직진차 40, 좌회전차 60).\n\n왜 0%가 아니냐?\n- 직진이 우선인 원칙이 있어도(일반적으로), '오른쪽에서 진입하는 차량에 양보'라는 교차로 기본 원칙도 같이 고려되기 때문입니다.\n- 결과적으로 '직진 = 무조건 무과실'처럼 단순화하면 분쟁에서 크게 손해 볼 수 있어요.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 차16-1" },
  },
  {
    id: 8,
    question: "신호 없는 교차로에서 '오른쪽 도로에서 직진'하는 차와 '왼쪽 도로에서 좌회전'하는 차가 충돌하면, 기본 과실은 직진차 30 : 좌회전차 70으로 보는 기준이 있다.",
    answer: true,
    explanation:
      "맞아요. 과실비율 인정기준(차16-2)은 '오른쪽 도로에서 진입하는 직진차'의 우선성을 반영해 기본 과실을 30:70으로 제시합니다.\n\n포인트:\n- 신호 없는 교차로는 '누가 오른쪽이냐'가 과실을 크게 좌우\n- 동시에 '좌회전'은 상대적으로 더 큰 주의의무가 붙는 경우가 많습니다.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 차16-2" },
  },
  {
    id: 9,
    question: "교차로에서 '횡단보도 보행자신호에 우회전'한 차량이, '녹색신호에 직진' 차량과 충돌하면 우회전차 100%로 보는 기준이 있다.",
    answer: true,
    explanation:
      "맞아요. 과실비율 인정기준(차5-2)은 우회전차가 보행자신호(횡단보도 신호)에 의해 규제되는 상황에서 무리하게 우회전해 사고가 나면, 직진차는 신호를 신뢰할 수 있어 우회전차의 일방과실(100:0)로 보는 취지입니다.\n\n포인트:\n- '나는 우회전이니까 천천히 갔다'만으로 면책되기 어렵습니다.\n- 상대(직진)는 ‘신호 신뢰’가 인정되는 경우가 많습니다.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 차5-2" },
  },
  {
    id: 10,
    question: "보행자신호가 적색인데 보행자가 횡단보도 부근을 건너다(무단횡단) 우회전 차량과 사고가 나면, 보행자 기본 과실을 크게(예: 60%) 보는 기준이 있다.",
    answer: true,
    explanation:
      "대체로 맞아요. 과실비율 인정기준(도표 118 예시)에서는 우회전 허용 상황에서 보행자신호 적색에 횡단보도 부근을 건너던 보행자 사고의 경우, 보행자 기본 과실을 60%로 제시하는 경우가 있습니다.\n\n핵심:\n- '보행자 보호'가 중요하지만, 보행자도 신호를 지킬 의무가 있습니다.\n- 다만 실제로는 도로 구조, 운전자의 주의의무, 속도, 시야 등으로 조정됩니다.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 도표118(사례형)" },
  },
  {
    id: 11,
    question: "횡단보도 도색이 없어도 '보행자 신호기'가 설치된 곳에서 난 사고는, 기준상 '신호기가 있는 횡단보도 사고'로 볼 수 있다는 설명이 있다.",
    answer: true,
    explanation:
      "맞아요. 과실비율 인정기준(도표 101 설명)에서는 도로공사 등으로 횡단보도 표시가 도로에 없더라도 보행자 신호기가 있는 도로에서의 횡단 중 사고를 '신호기가 있는 횡단보도 상의 사고'로 적용한다고 안내합니다(관련 판례 언급 포함).\n\n포인트:\n- '표시가 안 보였으니 몰랐다'는 주장만으로 끝나기 어렵고,\n- 신호기/현장구조/안전시설이 어떻게 되어 있었는지가 중요합니다.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 도표101(설명)" },
  },

  // ===== 실전 감각(법 + 과실 로직) =====
  {
    id: 12,
    question: "신호 없는 교차로에서는 '오른쪽에서 오는 차'가 있으면, 내가 직진이라도 무조건 멈춰서 양보해야 한다.",
    answer: false,
    explanation:
      "틀렸어요. 신호 없는 교차로의 기본 원칙은 ‘오른쪽 차 우선’이 자주 적용되지만, 상황이 단순하지 않아요.\n\n왜냐하면:\n- 교차로 폭, 진입 시점(동시 진입인지), 좌회전/우회전/직진 여부,\n- 서행 여부, 중앙선/일시정지 표지 등 교통안전시설\n같은 요소가 함께 판단됩니다.\n\n그래서 퀴즈의 포인트는:\n- '오른쪽 차가 있다고 무조건 정지'가 아니라,\n- '오른쪽 차 우선 원칙을 기본으로, 서행·주시·양보 의무를 강하게 가진다'가 더 정확합니다.",
    meta: { category: "교차로", basis: "과실비율 인정기준 교차로 도표들의 공통 취지" },
  },
  {
    id: 13,
    question: "횡단보도 사고에서 과실비율은 항상 100:0으로 고정된다.",
    answer: false,
    explanation:
      "틀렸어요. 보행자 보호 의무가 강해서 운전자 과실이 크게 잡히는 경우가 많지만, 항상 100:0으로 고정되지는 않습니다.\n\n조정될 수 있는 대표 요소:\n- 보행자 신호 위반(적색), 돌발 진입, 시야장애, 야간, 도로 구조\n- 차량의 제한속도 위반, 전방주시태만, 안전운전 불이행\n\n즉, '원칙'은 강하지만 '사실관계'에 따라 과실은 달라집니다.",
    meta: { category: "과실비율", basis: "도로교통법 제27조 + 과실비율 인정기준 일반" },
  },
  {
    id: 14,
    question: "보험사의 과실비율 도표(과실비율 인정기준)는 법률 그 자체라서, 어떤 사고든 도표 숫자가 100% 확정값이다.",
    answer: false,
    explanation:
      "틀렸어요. 과실비율 인정기준은 분쟁을 줄이기 위한 '표준화된 기준(가이드)'에 가깝고, 실제 사건은 증거/사실관계에 따라 조정될 수 있어요.\n\n포인트:\n- 도표는 출발점(기본과실)이고,\n- 가산/감산 요소(속도위반, 안전거리, 신호위반, 시야확보 등)로 최종 과실이 달라질 수 있습니다.\n\n그래서 학습 목적이라면, '숫자 암기'보다 '왜 그 숫자가 기본인지'를 이해하는 게 더 중요합니다.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 안내 취지" },
  },
  {
    id: 15,
    question: "차로 변경을 하다가 사고가 나면, 내 차가 먼저 들어갔는지(선점)만 보면 되고, 상대차의 정상 통행 방해 여부는 중요하지 않다.",
    answer: false,
    explanation:
      "틀렸어요. 차로 변경 사고의 핵심은 '정상 통행에 장애를 줄 우려가 있었는지'입니다.\n\n포인트:\n- 선점처럼 보이더라도 급격한 끼어들기/무리한 변경이면 변경차 과실이 크게 잡힐 수 있고,\n- 반대로 상대차도 과속·전방주시태만 등으로 일부 과실이 잡힐 수 있어요.\n\n결론: 차로 변경은 ‘상대 통행을 방해하지 않는 안전한 변경’이 기준입니다.",
    meta: { category: "차로변경", basis: "도로교통법 제19조" },
  },
  {
    id: 16,
    question: "갓길·도로 가장자리 주정차 차량 추돌 사고는 '추돌이면 무조건 뒤차 100%'이므로, 앞차가 위험하게 주차했는지 여부는 볼 필요가 없다.",
    answer: false,
    explanation:
      "틀렸어요. 기본과실은 뒤차 100으로 시작하는 경우가 많지만(차42-2), '앞차의 주정차가 위험을 만든 정도'는 최종 과실에 영향을 줄 수 있습니다.\n\n예:\n- 주정차 금지장소에 정차\n- 야간에 등화/표지 없이 시인성이 매우 낮음\n- 차로를 과도하게 침범해 사실상 도로를 막음\n\n즉, 기본은 기본이고, 위험 유발 요소가 있으면 앞차 과실이 일부 인정될 여지가 있습니다.",
    meta: { category: "과실비율", basis: "과실비율 인정기준 차42-2(기본과실 + 수정요소)" },
  },
];

export function getAllQuizzes() {
  return [...QUIZZES];
}

export function getRandomQuizzes(count = 5) {
  const n = Math.max(1, Math.min(count, QUIZZES.length));
  const shuffled = [...QUIZZES].sort(() => Math.random() - 0.5);
  return shuffled.slice(0, n);
}
